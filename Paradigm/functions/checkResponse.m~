function [feedback_answer,correct_wrong] = checkResponse(correct_response, panel_response,subject_detected_viol)
%CHECKRESPONSE Summary of this function goes here
%   Detailed explanation goes here

if isempty(panel_response) % SUBJECT HASN'T CONFIRMED BY PRESSING ON THE PANEL
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    %%%%%%%%%% DIDNT CONFIRM (DDC) %%%%%%%%%%%%%%%%%%%%%
    %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
    if subject_detected_viol % subject detected a violation but didn't confirm in panel
        if strcmp(correct_response, 'VIOLATION') % Indeed there was a violation
           feedback_answer = 'Bravo (but didnt confirm viol in panel)!';
           correct_wrong = 'CORRECT_DDC';
        else % But there was no violation
           feedback_answer = 'Peccato (but didnt confirm viol in panel)...!';
           correct_wrong = 'WRONG_DDC';
       end
    else % Nothing was pressed (no detection but no confirmaiton on panel)
        
       if strcmp(correct_response, 'VIOLATION') % Indeed there was a violation
           feedback_answer = 'Peccato (but didnt confirm viol in panel)...';
           correct_wrong = 'WRONG_DDC';
        else % But there was no violation
           feedback_answer = 'Bravo (but didnt confirm viol in panel)!!';
           correct_wrong = 'CORRECT_DDC';
       end          
    end
else % SUBJECT PRESSED SOMETHING
    % %%%%%%%%%%%%%%%%%%%%%%%%%%%%
    % SUBJECT PRESSED VIOL EITHER DURING TRIAL OR ON PANEL
    % %%%%%%%%%%%%%%%%%%%%%%%%%%%%
    if strcmp(panel_response, 'VIOLATION')
        if subject_detected_viol % Subject was CONSISTENT
            if strcmp(correct_response, 'VIOLATION') % indeed violation
                feedback_answer = 'Bravo!';
                correct_wrong = 'CORRECT';
            else % there was no violation
               feedback_answer = 'Peccato...';
               correct_wrong = 'WRONG';
            end
        else % Subject was SLOW
            if strcmp(correct_response, 'VIOLATION') % indeed violation
                feedback_answer = 'Bravo(slow)!';
                correct_wrong = 'CORRECT_SLOW';
            else % there was no violation
               feedback_answer = 'Peccato...';
               correct_wrong = 'WRONG';
            end
        end
    % %%%%%%%%%%%%%%%%%%%%%%%%%%%%
    % SUBJECT PRESSED ACCEPTABLE
    % %%%%%%%%%%%%%%%%%%%%%%%%%%%%
    elseif strcmp(panel_response, 'ACCEPTABLE') 
        if subject_detected_viol % subject has CHANGED HER MIND from viol to acceptable
           if strcmp(correct_response, 'VIOLATION') % but there was a violation (!PANEL CHOICE DETERMINES FEEDBACK!)
               feedback_answer = 'Peccato_CHM..!';
               correct_wrong = 'WRONG_CHM';
            else % Indeed, there was no violation
               feedback_answer = 'Bravo_CHM!';
               correct_wrong = 'CORRECT_CHM';
            end
        else % subject was CONSISTENT and only pressed acceptable
           if strcmp(correct_response, 'VIOLATION') % but there was a violation
               feedback_answer = 'Peccato..!';
               correct_wrong = 'WRONG';
            else % Indeed, there was no violation
               feedback_answer = 'Bravo!';
               correct_wrong = 'CORRECT';
            end
        end
    
    end

end

