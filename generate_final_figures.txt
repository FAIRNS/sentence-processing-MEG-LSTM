# sentence-processing-MEG-LSTM

# ###### FIGURE 2 (suggestion, input and forget gate for 775 and 987)
# Unit 775 - nounpp
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/nounpp.text -meta Data/Stimuli/nounpp.info -activations Data/LSTM/nounpp.pkl -o Figures/nounpp_775.pdf -c nounpp -g 4 r \- 6 775 cell number_1 singular number_2 singular success correct -g 1 r \- 6 775 gates.c_tilde number_1 singular number_2 singular success correct -g 1 r "\--" 6 775 gates.c_tilde number_1 singular number_2 plural success correct -g 1 b "\--" 6 775 gates.c_tilde number_1 plural number_2 singular success correct -g 1 b \- 6 775 gates.c_tilde number_1 plural number_2 plural success correct -g 2 r \- 6 775 gates.in number_1 singular number_2 singular success correct -g 2 r "\--" 6 775 gates.in number_1 singular number_2 plural success correct -g 2 b "\--" 6 775 gates.in number_1 plural number_2 singular success correct -g 2 b \- 6 775 gates.in number_1 plural number_2 plural success correct -g 3 r \- 6 775 gates.forget number_1 singular number_2 singular success correct -g 3 r "\--" 6 775 gates.forget number_1 singular number_2 plural success correct -g 3 b "\--" 6 775 gates.forget number_1 plural number_2 singular success correct -g 3 b \- 6 775 gates.forget number_1 plural number_2 plural success correct -g 4 r "\--" 6 775 cell number_1 singular number_2 plural success correct -g 4 b "\--" 6 775 cell number_1 plural number_2 singular success correct -g 4 b \- 6 775 cell number_1 plural number_2 plural success correct -g 4 g \- 6 1149 cell success correct -g 5 r \- 6 775 gates.out number_1 singular number_2 singular success correct -g 5 r "\--" 6 775 gates.out number_1 singular number_2 plural success correct -g 5 b "\--" 6 775 gates.out number_1 plural number_2 singular success correct -g 5 b \- 6 775 gates.out number_1 plural number_2 plural success correct -r 1 -x "The" "boy(s)" "near" "the" "car(s)" "greet(s)" "the" --no-legend


# Unit 987 - nounpp
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/nounpp.text -meta Data/Stimuli/nounpp.info -activations Data/LSTM/nounpp.pkl -o Figures/nounpp_987.pdf -c nounpp -g 4 r \- 6 987 cell number_1 singular number_2 singular success correct -g 4 r "\--" 6 987 cell number_1 singular number_2 plural success correct -g 4 b "\--" 6 987 cell number_1 plural number_2 singular success correct -g 4 b \- 6 987 cell number_1 plural number_2 plural success correct -g 3 r \- 6 987 gates.forget number_1 singular number_2 singular success correct -g 3 r "\--" 6 987 gates.forget number_1 singular number_2 plural success correct -g 3 b "\--" 6 987 gates.forget number_1 plural number_2 singular success correct -g 3 b \- 6 987 gates.forget number_1 plural number_2 plural success correct -g 2 r \- 6 987 gates.in number_1 singular number_2 singular success correct -g 2 r "\--" 6 987 gates.in number_1 singular number_2 plural success correct -g 2 b "\--" 6 987 gates.in number_1 plural number_2 singular success correct -g 2 b \- 6 987 gates.in number_1 plural number_2 plural success correct -g 1 r \- 6 987 gates.c_tilde number_1 singular number_2 singular success correct -g 1 r "\--" 6 987 gates.c_tilde number_1 singular number_2 plural success correct -g 1 b "\--" 6 987 gates.c_tilde number_1 plural number_2 singular success correct -g 1 b \- 6 987 gates.c_tilde number_1 plural number_2 plural success correct -g 4 g \- 6 1149 cell success correct -g 5 r \- 6 987 gates.out number_1 singular number_2 singular success correct -g 5 r "\--" 6 987 gates.out number_1 singular number_2 plural success correct -g 5 b "\--" 6 987 gates.out number_1 plural number_2 singular success correct -g 5 b \- 6 987 gates.out number_1 plural number_2 plural success correct -r 1 -x "The" "boy(s)" "near" "the" "car(s)" "greet(s)" "the"

# YLABELS:-y "$\tilde{C_t}$" "\$i\_t\$" "\$f\_t\$" "\$C\_t\$" "\$o\_t\$"

# ###### FIGURE 4 (GAT)
python3 Code/LSTM/model-analysis/plot_GAT.py 

# ###### FIGURE 5 (Effernt weights)
python3 Code/LSTM/model-analysis/extract_embeddings_from_rnn.py -model Data/LSTM/hidden650_batch128_dropout0.2_lr20.0.cpu.pt -v Data/LSTM/english_vocab.txt -i Data/Stimuli/singular_plural_verbs.txt -u 775 987 847 769 772 1282 1149 650 1299 -c b r m c c c g k k

# ####### FIGURE 7 (units interactions)
# Unit interactions: plot weight distributions and mds (--no-mds flag for skipping mds analysis)
python3 Code/LSTM/model-analysis/extract_weights_from_rnn.py -model Data/LSTM/hidden650_batch128_dropout0.2_lr20.0.cpu.pt -fu 769 775 987 1149 -tu 769 775 987 1149 -o Figures/interactions.png

# ####### FIGURE 8 (RCs for units 775, 987)
# subjrel_that
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/subjrel_that.text -meta Data/Stimuli/subjrel_that.info -activations Data/LSTM/subjrel_that.pkl -o Figures/subjrel_that_775_987.png -c subjrel_that -g 1 b \- 6 775 cell number_1 singular number_2 singular success correct -g 1 b "\-." 6 775 cell number_1 singular number_2 plural success correct -g 1 b "\-\-" 6 775 cell number_1 plural number_2 singular success correct -g 1 b : 6 775 cell number_1 plural number_2 plural success correct -g 1 r \- 6 987 cell number_1 singular number_2 singular success correct -g 1 r "\-." 6 987 cell number_1 singular number_2 plural success correct -g 1 r "\-\-" 6 987 cell number_1 plural number_2 singular success correct -g 1 r : 6 987 cell number_1 plural number_2 plural success correct -g 1 g \- 6 1149 hidden number_1 singular success correct -g 1 g : 6 1149 hidden number_1 plural success correct -g 2 r \- 6 987 gates.forget number_1 singular number_2 singular success correct -g 2 r "\-." 6 987 gates.forget number_1 singular number_2 plural success correct -g 2 r "\-\-" 6 987 gates.forget number_1 plural number_2 singular success correct -g 2 r : 6 987 gates.forget number_1 plural number_2 plural success correct -g 2 b \- 6 775 gates.forget number_1 singular number_2 singular success correct -g 2 b "\-." 6 775 gates.forget number_1 singular number_2 plural success correct -g 2 b "\-\-" 6 775 gates.forget number_1 plural number_2 singular success correct -g 2 b : 6 775 gates.forget number_1 plural number_2 plural success correct -g 3 r \- 6 987 gates.in number_1 singular number_2 singular success correct -g 3 r "\-." 6 987 gates.in number_1 singular number_2 plural success correct -g 3 r : 6 987 gates.in number_1 plural number_2 singular success correct -g 3 r "\-\-" 6 987 gates.in number_1 plural number_2 plural success correct -g 3 b \- 6 775 gates.in number_1 singular number_2 singular success correct -g 3 b "\-." 6 775 gates.in number_1 singular number_2 plural success correct -g 3 b "\-\-" 6 775 gates.in number_1 plural number_2 singular success correct -g 3 b : 6 775 gates.in number_1 plural number_2 plural success correct -r 1


# objrel_that
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/objrel_that.text -meta Data/Stimuli/objrel_that.info -activations Data/LSTM/objrel_that.pkl -o Figures/objrel_that_775_987.png -c objrel_that -g 1 b \- 6 775 cell number_1 singular number_2 singular success correct -g 1 b "\-." 6 775 cell number_1 singular number_2 plural success correct -g 1 b "\-\-" 6 775 cell number_1 plural number_2 singular success correct -g 1 b : 6 775 cell number_1 plural number_2 plural success correct -g 1 r \- 6 987 cell number_1 singular number_2 singular success correct -g 1 r "\-." 6 987 cell number_1 singular number_2 plural success correct -g 1 r "\-\-" 6 987 cell number_1 plural number_2 singular success correct -g 1 r : 6 987 cell number_1 plural number_2 plural success correct -g 1 g \- 6 1149 hidden number_1 singular success correct -g 1 g : 6 1149 hidden number_1 plural success correct -g 2 r \- 6 987 gates.forget number_1 singular number_2 singular success correct -g 2 r "\-." 6 987 gates.forget number_1 singular number_2 plural success correct -g 2 r "\-\-" 6 987 gates.forget number_1 plural number_2 singular success correct -g 2 r : 6 987 gates.forget number_1 plural number_2 plural success correct -g 2 b \- 6 775 gates.forget number_1 singular number_2 singular success correct -g 2 b "\-." 6 775 gates.forget number_1 singular number_2 plural success correct -g 2 b "\-\-" 6 775 gates.forget number_1 plural number_2 singular success correct -g 2 b : 6 775 gates.forget number_1 plural number_2 plural success correct -g 3 r \- 6 987 gates.in number_1 singular number_2 singular success correct -g 3 r "\-." 6 987 gates.in number_1 singular number_2 plural success correct -g 3 r : 6 987 gates.in number_1 plural number_2 singular success correct -g 3 r "\-\-" 6 987 gates.in number_1 plural number_2 plural success correct -g 3 b \- 6 775 gates.in number_1 singular number_2 singular success correct -g 3 b "\-." 6 775 gates.in number_1 singular number_2 plural success correct -g 3 b "\-\-" 6 775 gates.in number_1 plural number_2 singular success correct -g 3 b : 6 775 gates.in number_1 plural number_2 plural success correct -r 1

# ####### FIGURE  9 (double subject RC for units 775, 987)
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/double_subjrel_that.text -meta Data/Stimuli/double_subjrel_that.info -activations Data/LSTM/double_subjrel_that.pkl -o Figures/double_subjrel_that_775_987.png -c double_subjrel_that -g 1 b \- 6 775 cell number_1 singular number_2 singular success correct -g 1 b "\-." 6 775 cell number_1 singular number_2 plural success correct -g 1 b "\-\-" 6 775 cell number_1 plural number_2 singular success correct -g 1 b : 6 775 cell number_1 plural number_2 plural success correct -g 1 r \- 6 987 cell number_1 singular number_2 singular success correct -g 1 r "\-." 6 987 cell number_1 singular number_2 plural success correct -g 1 r "\-\-" 6 987 cell number_1 plural number_2 singular success correct -g 1 r : 6 987 cell number_1 plural number_2 plural success correct -g 1 g \- 6 1149 hidden number_1 singular success correct -g 1 g : 6 1149 hidden number_1 plural success correct -g 2 r \- 6 987 gates.forget number_1 singular number_2 singular success correct -g 2 r "\-." 6 987 gates.forget number_1 singular number_2 plural success correct -g 2 r "\-\-" 6 987 gates.forget number_1 plural number_2 singular success correct -g 2 r : 6 987 gates.forget number_1 plural number_2 plural success correct -g 2 b \- 6 775 gates.forget number_1 singular number_2 singular success correct -g 2 b "\-." 6 775 gates.forget number_1 singular number_2 plural success correct -g 2 b "\-\-" 6 775 gates.forget number_1 plural number_2 singular success correct -g 2 b : 6 775 gates.forget number_1 plural number_2 plural success correct -g 3 r \- 6 987 gates.in number_1 singular number_2 singular success correct -g 3 r "\-." 6 987 gates.in number_1 singular number_2 plural success correct -g 3 r : 6 987 gates.in number_1 plural number_2 singular success correct -g 3 b "\-\-" 6 987 gates.in number_1 plural number_2 plural success correct -g 3 b \- 6 775 gates.in number_1 singular number_2 singular success correct -g 3 b "\-." 6 775 gates.in number_1 singular number_2 plural success correct -g 3 b "\-\-" 6 775 gates.in number_1 plural number_2 singular success correct -g 3 b : 6 775 gates.in number_1 plural number_2 plural success correct -r 1

# Singular and plural encoding in number units (775, 987) - double_subjrel_that (with split curves for N3)
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/double_subjrel_that.text -meta Data/Stimuli/double_subjrel_that.info -activations Data/LSTM/double_subjrel_that.pkl -o Figures/double_subjrel_that_775_987.png -c double_subjrel_that -g 1 b \- 6 775 cell number_1 singular number_2 singular number_3 singular success correct -g 1 b \- 6 775 cell number_1 singular number_2 singular number_3 plural success correct -g 1 b "\-." 6 775 cell number_1 singular number_2 plural number_3 singular success correct -g 1 b "\-." 6 775 cell number_1 singular number_2 plural number_3 plural success correct -g 1 b "\-\-" 6 775 cell number_1 plural number_2 singular success correct -g 1 b : 6 775 cell number_1 plural number_2 plural success correct -g 1 r \- 6 987 cell number_1 singular number_2 singular number_3 singular -g 1 r \- 6 987 cell number_1 singular number_2 singular number_3 plural success correct -g 1 r "\-." 6 987 cell number_1 singular number_2 plural number_3 singular -g 1 r "\-." 6 987 cell number_1 singular number_2 plural number_3 plural success correct -g 1 r "\-\-" 6 987 cell number_1 plural number_2 singular success correct -g 1 r : 6 987 cell number_1 plural number_2 plural success correct -g 1 g \- 6 1149 hidden number_1 singular success correct -g 1 g : 6 1149 hidden number_1 plural success correct -g 2 r \- 3 987 gates.forget number_1 singular number_2 singular success correct -g 2 r "\-." 3 987 gates.forget number_1 singular number_2 plural success correct -g 2 r "\-\-" 3 987 gates.forget number_1 plural number_2 singular success correct -g 2 r : 3 987 gates.forget number_1 plural number_2 plural success correct -g 2 b \- 3 775 gates.forget number_1 singular number_2 singular success correct -g 2 b "\-." 3 775 gates.forget number_1 singular number_2 plural success correct -g 2 b "\-\-" 3 775 gates.forget number_1 plural number_2 singular success correct -g 2 b : 3 775 gates.forget number_1 plural number_2 plural success correct -g 2 m \- 3 987 gates.in number_1 singular number_2 singular success correct -g 2 m "\-." 3 987 gates.in number_1 singular number_2 plural success correct -g 2 m : 3 987 gates.in number_1 plural number_2 singular success correct -g 2 m "\-\-" 3 987 gates.in number_1 plural number_2 plural success correct -g 2 c \- 3 775 gates.in number_1 singular number_2 singular success correct -g 2 c "\-." 3 775 gates.in number_1 singular number_2 plural success correct -g 2 c "\-\-" 3 775 gates.in number_1 plural number_2 singular success correct -g 2 c : 3 775 gates.in number_1 plural number_2 plural success correct -r 1

