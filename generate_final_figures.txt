# sentence-processing-MEG-LSTM

# interactions between syntax (1149) and number units (775 and 987) - nounpp
python Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/nounpp.text -meta Data/Stimuli/nounpp.info -activations Data/LSTM/nounpp.pkl -o Figures/nounpp_775_987_1149.png -c nounpp -g g : 1149 hidden number_1 singular -g g \- 1149 hidden number_1 plural -g b : 775 gates.in number_1 plural -g c : 775 gates.forget number_1 plural -g r \- 987 gates.in number_1 singular -g r \- 987 gates.forget number_1 singular

# Singular and plural encoding in number units (775, 987) -nounpp
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/nounpp.text -meta Data/Stimuli/nounpp.info -activations Data/LSTM/nounpp.pkl -o Figures/nounpp_775_987.png -c nounpp -g 1 b \- 6 775 cell number_1 singular number_2 singular success correct -g 1 b "\-." 6 775 cell number_1 singular number_2 plural success correct -g 1 b "\-\-" 6 775 cell number_1 plural number_2 singular success correct -g 1 b : 6 775 cell number_1 plural number_2 plural success correct -g 1 r \- 6 987 cell number_1 singular number_2 singular success correct -g 1 r "\-." 6 987 cell number_1 singular number_2 plural success correct -g 1 r "\-\-" 6 987 cell number_1 plural number_2 singular success correct -g 1 r : 6 987 cell number_1 plural number_2 plural success correct -g 1 g \- 6 1149 hidden number_1 singular success correct -g 1 g : 6 1149 hidden number_1 plural success correct -g 2 r \- 3 987 gates.forget number_1 singular number_2 singular success correct -g 2 r "\-." 3 987 gates.forget number_1 singular number_2 plural success correct -g 2 r "\-\-" 3 987 gates.forget number_1 plural number_2 singular success correct -g 2 r : 3 987 gates.forget number_1 plural number_2 plural success correct -g 2 b \- 3 775 gates.forget number_1 singular number_2 singular success correct -g 2 b "\-." 3 775 gates.forget number_1 singular number_2 plural success correct -g 2 b "\-\-" 3 775 gates.forget number_1 plural number_2 singular success correct -g 2 b : 3 775 gates.forget number_1 plural number_2 plural success correct -g 2 m \- 3 987 gates.in number_1 singular number_2 singular success correct -g 2 m "\-." 3 987 gates.in number_1 singular number_2 plural success correct -g 2 m : 3 987 gates.in number_1 plural number_2 singular success correct -g 2 m "\-\-" 3 987 gates.in number_1 plural number_2 plural success correct -g 2 c \- 3 775 gates.in number_1 singular number_2 singular success correct -g 2 c "\-." 3 775 gates.in number_1 singular number_2 plural success correct -g 2 c "\-\-" 3 775 gates.in number_1 plural number_2 singular success correct -g 2 c : 3 775 gates.in number_1 plural number_2 plural success correct -r 1


#-g 3 b \- 775 cell number_1 singular number_2 singular success wrong -g 3 b \- 775 cell number_1 singular number_2 plural success wrong -g 3 b : 775 cell number_1 plural number_2 singular success wrong -g 3 b : 775 cell number_1 plural number_2 plural success wrong -g 3 r \- 987 cell number_1 singular number_2 singular success wrong -g 3 r \- 987 cell number_1 singular number_2 plural success wrong -g 3 r : 987 cell number_1 plural number_2 singular success wrong -g 3 r : 987 cell number_1 plural number_2 plural success wrong -g 3 g : 1149 hidden number_1 singular success wrong -g 3 g \- 1149 hidden number_1 plural success wrong -g 4 r \- 987 gates.forget number_1 singular number_2 singular success wrong -g 4 r \- 987 gates.forget number_1 singular number_2 plural success wrong -g 4 r : 987 gates.forget number_1 plural number_2 singular success wrong -g 4 r : 987 gates.forget number_1 plural number_2 plural success wrong -g 4 b \- 775 gates.forget number_1 singular number_2 singular success wrong -g 4 b \- 775 gates.forget number_1 singular number_2 plural success wrong -g 4 b : 775 gates.forget number_1 plural number_2 singular success wrong -g 4 b : 775 gates.forget number_1 plural number_2 plural success wrong 


# Singular and plural encoding in number units (775, 987) - subjrel_that
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/subjrel_that.text -meta Data/Stimuli/subjrel_that.info -activations Data/LSTM/subjrel_that.pkl -o Figures/subjrel_that_775_987.png -c subjrel_that -g 1 b \- 6 775 cell number_1 singular number_2 singular success correct -g 1 b "\-." 6 775 cell number_1 singular number_2 plural success correct -g 1 b "\-\-" 6 775 cell number_1 plural number_2 singular success correct -g 1 b : 6 775 cell number_1 plural number_2 plural success correct -g 1 r \- 6 987 cell number_1 singular number_2 singular success correct -g 1 r "\-." 6 987 cell number_1 singular number_2 plural success correct -g 1 r "\-\-" 6 987 cell number_1 plural number_2 singular success correct -g 1 r : 6 987 cell number_1 plural number_2 plural success correct -g 1 g \- 6 1149 hidden number_1 singular success correct -g 1 g : 6 1149 hidden number_1 plural success correct -g 2 r \- 3 987 gates.forget number_1 singular number_2 singular success correct -g 2 r "\-." 3 987 gates.forget number_1 singular number_2 plural success correct -g 2 r "\-\-" 3 987 gates.forget number_1 plural number_2 singular success correct -g 2 r : 3 987 gates.forget number_1 plural number_2 plural success correct -g 2 b \- 3 775 gates.forget number_1 singular number_2 singular success correct -g 2 b "\-." 3 775 gates.forget number_1 singular number_2 plural success correct -g 2 b "\-\-" 3 775 gates.forget number_1 plural number_2 singular success correct -g 2 b : 3 775 gates.forget number_1 plural number_2 plural success correct -g 2 m \- 3 987 gates.in number_1 singular number_2 singular success correct -g 2 m "\-." 3 987 gates.in number_1 singular number_2 plural success correct -g 2 m : 3 987 gates.in number_1 plural number_2 singular success correct -g 2 m "\-\-" 3 987 gates.in number_1 plural number_2 plural success correct -g 2 c \- 3 775 gates.in number_1 singular number_2 singular success correct -g 2 c "\-." 3 775 gates.in number_1 singular number_2 plural success correct -g 2 c "\-\-" 3 775 gates.in number_1 plural number_2 singular success correct -g 2 c : 3 775 gates.in number_1 plural number_2 plural success correct -r 1


# Singular and plural encoding in number units (775, 987) - objrel_that
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/objrel_that.text -meta Data/Stimuli/objrel_that.info -activations Data/LSTM/objrel_that.pkl -o Figures/objrel_that_775_987.png -c objrel_that -g 1 b \- 6 775 cell number_1 singular number_2 singular success correct -g 1 b "\-." 6 775 cell number_1 singular number_2 plural success correct -g 1 b "\-\-" 6 775 cell number_1 plural number_2 singular success correct -g 1 b : 6 775 cell number_1 plural number_2 plural success correct -g 1 r \- 6 987 cell number_1 singular number_2 singular success correct -g 1 r "\-." 6 987 cell number_1 singular number_2 plural success correct -g 1 r "\-\-" 6 987 cell number_1 plural number_2 singular success correct -g 1 r : 6 987 cell number_1 plural number_2 plural success correct -g 1 g \- 6 1149 hidden number_1 singular success correct -g 1 g : 6 1149 hidden number_1 plural success correct -g 2 r \- 3 987 gates.forget number_1 singular number_2 singular success correct -g 2 r "\-." 3 987 gates.forget number_1 singular number_2 plural success correct -g 2 r "\-\-" 3 987 gates.forget number_1 plural number_2 singular success correct -g 2 r : 3 987 gates.forget number_1 plural number_2 plural success correct -g 2 b \- 3 775 gates.forget number_1 singular number_2 singular success correct -g 2 b "\-." 3 775 gates.forget number_1 singular number_2 plural success correct -g 2 b "\-\-" 3 775 gates.forget number_1 plural number_2 singular success correct -g 2 b : 3 775 gates.forget number_1 plural number_2 plural success correct -g 2 m \- 3 987 gates.in number_1 singular number_2 singular success correct -g 2 m "\-." 3 987 gates.in number_1 singular number_2 plural success correct -g 2 m : 3 987 gates.in number_1 plural number_2 singular success correct -g 2 m "\-\-" 3 987 gates.in number_1 plural number_2 plural success correct -g 2 c \- 3 775 gates.in number_1 singular number_2 singular success correct -g 2 c "\-." 3 775 gates.in number_1 singular number_2 plural success correct -g 2 c "\-\-" 3 775 gates.in number_1 plural number_2 singular success correct -g 2 c : 3 775 gates.in number_1 plural number_2 plural success correct -r 1


# Singular and plural encoding in number units (769, 775, 847, 987, 1282) - nounpp
python3 Code/LSTM/model-analysis/plot_units_activations.py -sentences Data/Stimuli/nounpp.text -meta Data/Stimuli/nounpp.info -activations Data/LSTM/nounpp.pkl -o Figures/nounpp_all_number_units.png -c nounpp -g 1 y : 6 769 hidden number_1 singular -g 1 y \- 6 769 hidden number_1 plural -g 1 b : 6 775 hidden number_1 singular -g 1 b \- 6 775 hidden number_1 plural -g 1 g : 6 847 hidden number_1 singular -g 1 g \- 6 847 hidden number_1 plural -g 1 r : 6 987 hidden number_1 singular -g 1 r \- 6 987 hidden number_1 plural -g 1 m : 6 1282 hidden number_1 singular -g 1 m \- 6 1282 hidden number_1 plural -r 1

# Unit interactions: plot weight distributions and mds (--no-mds flag for skipping mds analysis)
python3 Code/LSTM/model-analysis/extract_weights_from_rnn.py -model Data/LSTM/hidden650_batch128_dropout0.2_lr20.0.cpu.pt -fu 769 775 987 1149 -tu 769 775 987 1149 -o Figures/interactions.png

# Output weights: extract output weights and calculate PCA
python3 Code/LSTM/model-analysis/extract_embeddings_from_rnn.py -model Data/LSTM/hidden650_batch128_dropout0.2_lr20.0.cpu.pt  -u 769 847 987 775 1282 1149 650 1299
python3 Code/LSTM/model-analysis/extract_embeddings_from_rnn.py -model Data/LSTM/hidden650_batch128_dropout0.2_lr20.0.cpu.pt  -u 769 847 987 775 1282 1149 650 1299 -c m y r b c g k k

